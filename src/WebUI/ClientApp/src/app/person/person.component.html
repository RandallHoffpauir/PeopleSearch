<h1>People Search</h1>
<input type="text" [(ngModel)]="searchValue" (keyup.enter)="search()" placeholder="search value" />

<button class="btn btn-primary" (click)="search()">Search</button>

<button class="btn btn-default" (click)="showNewPersonModal(newPersonModalTemplate)">Add Person...</button>


<div *ngIf="vm">
  <ul id="persons">
    <li *ngFor="let person of vm.persons; index as i">

      <div class="row">

        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">First and Last Name</span>
          </div>
          <input type="text" aria-label="First name" class="form-control" [(ngModel)]="person.firstName" />
          <input type="text" aria-label="First name" class="form-control" [(ngModel)]="person.lastName" />
          <input type="text" aria-label="First name" class="form-control" [(ngModel)]="person.birthDate" />
          <ul>
            <li *ngFor="let inter of person.interests; index as j">
              {{inter.interest}}
            </li>
          </ul>
        </div>
        <button id="savePerson" (click)="updatePerson(person)">Save</button>
        <div class="col-sm-4">{{person.firstName}} {{person.lastName}} age: {{ calculateAge(person.birthDate) }}</div>
      </div>

    </li>
  </ul>
  <div class="row">
  </div>
</div>

<div *ngIf="debug">
  <pre>{{ vm | json }}</pre>
</div>


<!--<ng-template #newPersonModalTemplate>
  <div class="modal-header clearfix">
    <h4 class="modal-title float-left">New List</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="newPersonCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input type="text" class="form-control" id="firstName" placeholder="First Name..." [(ngModel)]="newPersonEditor.firstName" />
      <div *ngIf="newPersonEditor.error" class="invalid-feedback">
        {{ newPersonEditor.error }}
      </div>
    </div>
    <div *ngIf="debug">
      <pre>{{ newPersonEditor | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <div class="text-right">
      <button class="btn btn-default" (click)="newPersonCancelled()">Cancel</button>
      <button class="btn btn-primary" (click)="addPerson()">Create</button>
    </div>
  </div>
</ng-template>-->

<ng-template #newPersonModalTemplate>
  <div class="modal-header clearfix">
    <h4 class="modal-title float-left">New List</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="newPersonCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input type="text" class="form-control" id="firstName" placeholder="First Name..." [(ngModel)]="newPersonEditor.firstName"
             [ngClass]="{ 'is-invalid': newPersonEditor.error }" />
      <div *ngIf="newPersonEditor.error" class="invalid-feedback">
        {{ newPersonEditor.error }}
      </div>
      <label for="lastName">Last Name:</label>
      <input type="text" class="form-control" id="lastName" placeholder="Last Name..." [(ngModel)]="newPersonEditor.lastName"
             [ngClass]="{ 'is-invalid': newPersonEditor.error }" />
      <div *ngIf="newPersonEditor.error" class="invalid-feedback">
        {{ newPersonEditor.error }}
      </div>
      <label for="address">Address:</label>
      <input type="text" class="form-control" id="address" placeholder="Address..." [(ngModel)]="newPersonEditor.address"
             [ngClass]="{ 'is-invalid': newPersonEditor.error }" />
      <div *ngIf="newPersonEditor.error" class="invalid-feedback">
        {{ newPersonEditor.error }}
      </div>
    </div>
    <div *ngIf="debug">
      <pre>{{ newPersonEditor | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <div class="text-right">
      <button class="btn btn-default" (click)="newPersonCancelled()">Cancel</button>
      <button class="btn btn-primary" (click)="addPerson()">Create</button>
    </div>
  </div>
</ng-template>
