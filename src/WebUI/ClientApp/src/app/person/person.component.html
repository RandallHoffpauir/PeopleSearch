
<h1>People Search</h1>
<div>
  <input type="text" [(ngModel)]="searchValue" (keyup.enter)="search()" placeholder="search value" />

  <button class="btn btn-primary" (click)="search()">Search</button>

  <button class="btn btn-primary" (click)="showNewPersonModal(newPersonModalTemplate)">Add Person...</button>

</div>
<br />


<div *ngIf="vm" class="container-fluid">
  <ul id="persons" class="no-bullets">
    <li *ngFor="let person of vm.persons; index as i">

      <!--<div class="row">-->

      <div class="col-xs-12 col-sm-6 col-md-6 col-md-offset-3">
        <div class="well well-sm">
          <div class="row">
            <div class="col-xs-12 col-sm-2 col-md-4 col-lg-5">
              <img id="{{ 'photo' + person.id}}" src="" alt="" class="img-rounded img-responsive" height="200"/>
            </div>
            <div class="col-xs-12 col-sm-10 col-md-8 col-lg-7">
              <h4>{{person.firstName}} {{person.lastName}} ({{ calculateAge(person.birthDate) }})</h4>
              <small><span>{{person.address}}<i class="glyphicon glyphicon-map-marker"></i></span></small><br />
              <small><span>{{person.city}} {{person.state}} {{person.zip}}<i class="glyphicon glyphicon-map-marker"></i></span></small>
              <p>
                <i class="glyphicon glyphicon-envelope"></i>lorem@random.net
                <br />
                <i class="glyphicon glyphicon-globe"></i><a href="https://www.prepbootstrap.com">www.prepbootstrap.com</a>
                <br />
                <i class="glyphicon glyphicon-gift"></i>January 19, 1993
              </p>
              <div class="btn-group">
                <button class="btn btn-primary" id="editPerson" (click)="showEditPersonModal(editPersonModalTemplate, person)">Edit Person</button>
                <button class="btn btn-primary" id="updatePersonPhoto" (click)="showEditPersonPhotoModal(editPersonPhotoModalTemplate, person)">Update Photo</button>
              </div>

              <!--<div class="btn-group">
                <button id="editPerson" (click)="showEditPersonModal(editPersonModalTemplate, person)"></button>
                <a href="#" class="btn btn-primary"><span class="fa fa-2x fa-facebook"></span></a>
                <a href="#" class="btn btn-danger"><span class="fa fa-2x fa-google"></span></a>
                <a href="#" class="btn btn-info"><span class="fa fa-2x fa-twitter"></span></a>
                <a href="#" class="btn btn-primary"><span class="fa fa-2x fa-linkedin"></span></a>
              </div>-->
            </div>
          </div>
        </div>
      </div>

      <!--</div>-->

    </li>
  </ul>
  <div class="row">
  </div>
</div>

<div *ngIf="debug">
  <pre>{{ vm | json }}</pre>
</div>



<ng-template #editPersonTemplate>
  <label for="firstName">First Name:</label>
  <input type="text" class="form-control" id="firstName" placeholder="First Name..." [(ngModel)]="personEditor.firstName" />

  <label for="lastName">Last Name:</label>
  <input type="text" class="form-control" id="lastName" placeholder="Last Name..." [(ngModel)]="personEditor.lastName" />

  <label for="address">Address:</label>
  <input type="text" class="form-control" id="address" placeholder="Address..." [(ngModel)]="personEditor.address" />

  <label for="address">City:</label>
  <input type="text" class="form-control" id="city" placeholder="City..." [(ngModel)]="personEditor.city" />

  <label for="address">State:</label>
  <input type="text" class="form-control" id="state" placeholder="State..." [(ngModel)]="personEditor.state" />

  <label for="address">Zip:</label>
  <input type="text" class="form-control" id="zip" placeholder="Zip..." [(ngModel)]="personEditor.zip" />

  <label for="address">Birth Date:</label>
  <input type="text" class="form-control" id="birthDate" placeholder="Birth Date..." [(ngModel)]="personEditor.birthDate" />

</ng-template>

<ng-template #newPersonModalTemplate>
  <div class="modal-header clearfix">
    <h4 class="modal-title float-left">New Person</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="newPersonCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">

      <ng-container *ngTemplateOutlet="editPersonTemplate"></ng-container>
    </div>
    <div *ngIf="debug">
      <pre>{{ personEditor | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <div class="text-right">
      <button class="btn btn-default" (click)="newPersonCancelled()">Cancel</button>
      <button class="btn btn-primary" (click)="addPerson()">Create</button>
    </div>
  </div>
</ng-template>

<ng-template #editPersonModalTemplate>
  <div class="modal-header clearfix">
    <h4 class="modal-title float-left">New Person</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="editPersonCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">

      <ng-container *ngTemplateOutlet="editPersonTemplate"></ng-container>
    </div>
    <div *ngIf="debug">
      <pre>{{ personEditor | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <div class="text-right">
      <button class="btn btn-default" (click)="editPersonCancelled()">Cancel</button>
      <button class="btn btn-primary" (click)="updatePerson(selectedPerson.id)">Update</button>
    </div>
  </div>
</ng-template>

<ng-template #editPersonPhotoModalTemplate>
  <div class="modal-header clearfix">
    <h4 class="modal-title float-left">Update Photo</h4>
    <button type="button" class="close float-right" aria-label="Close" (click)="editPersonPhotoCancelled()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="form-group">

      <form enctype="multipart/form-data">
        <div style="height: 200">
          <img [src]="url" height="200" />
        </div>
        <br/>
        <input type="file" id="photo" accept=".jpg" (change)="onSelectFile($event)" name="photo"/>
        <!--<input type="submit" class="btn btn-primary" (click)="savePersonImage()">/>-->
      </form>

    </div>
    <div *ngIf="debug">
      <pre>{{ personEditor | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <div class="text-right">
      <button class="btn btn-default" (click)="editPersonPhotoCancelled()">Cancel</button>
      <button class="btn btn-primary" (click)="savePersonImage(selectedPerson.id)">Update</button>
    </div>
  </div>
</ng-template>


<style>
  .well {
    border: 1px solid blue;
  }

  ul.no-bullets {
    list-style-type: none; /* Remove bullets */
    padding: 0; /* Remove padding */
    margin: 0; /* Remove margins */
  }
</style>
